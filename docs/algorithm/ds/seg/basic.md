---
title: 线段树基础
createTime: 2025/12/27 07:59:20
permalink: /algorithm/seg/basic/
---

## _Intro_
既然是基础，那就讲基础。  
线段树是一种跟树状数组相似的树形数据结构，图上表示就是一颗补齐的树状数组。  
一般只需要考虑父节点与两个儿子的信息向下传递与答案向上维护。  

## _Examples_
### Acwing 1277. 维护序列 {#acwing-1277}
很明显，我们需要在线段树中维护 `sum`，`add`，`mul` 三个值，其中后两个为懒标记。  
这个时候就需要考虑对于答案的表示是**先加后乘**还是**先乘后加**，即将答案表示为 `(sum+add)*mul` 还是 `sum*mul+add`。  
对于第一种而言，如果此时操作为区间加，则会导致无法正确向下传递信息，所以用第二种。  
假设当前操作数为 `a`，对加而言，只需让 `add+=a`；对乘而言，只需让 `mul*=a , add*=a`。  